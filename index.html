<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>⚽ Futbol Oyunu</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body, html {
      width: 100%;
      height: 100%;
      background: #0a3d0a;
      font-family: Arial, sans-serif;
      color: #fff;
      overflow: hidden;
    }

    #menu {
      padding: 20px;
      text-align: center;
    }

    .team {
      background: #222;
      padding: 10px 18px;
      margin: 8px auto;
      width: 220px;
      cursor: pointer;
      border-radius: 8px;
      font-weight: bold;
      font-size: 16px;
      border: 2px solid #fff;
      transition: background 0.3s;
    }

    .team:hover {
      background: #444;
    }

    canvas {
      display: none;
      background: #007000;
      border: 3px solid #fff;
      margin: auto;
      max-width: 100vw;
      height: auto;
      touch-action: none;
    }

    #mobileControls {
      display: none;
      position: fixed;
      bottom: 15px;
      left: 50%;
      transform: translateX(-50%);
      width: 360px;
      height: 90px;
      background: rgba(0, 0, 0, 0.3);
      border-radius: 15px;
      display: flex;
      justify-content: space-around;
      align-items: center;
      z-index: 999;
      user-select: none;
      -webkit-user-select: none;
    }

    .btn {
      background: rgba(255, 255, 255, 0.2);
      border-radius: 50%;
      width: 70px;
      height: 70px;
      text-align: center;
      line-height: 70px;
      font-weight: bold;
      font-size: 28px;
      color: white;
      user-select: none;
      cursor: pointer;
      transition: background 0.2s;
    }

    .btn:active {
      background: rgba(255, 255, 255, 0.6);
    }

    #joystick {
      position: relative;
      width: 110px;
      height: 110px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 50%;
    }

    #stick {
      position: absolute;
      width: 50px;
      height: 50px;
      background: rgba(255, 255, 255, 0.3);
      border-radius: 50%;
      top: 30px;
      left: 30px;
      transition: 0.1s;
    }

    #scoreBoard, #timeBoard {
      position: fixed;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(0, 0, 0, 0.5);
      padding: 8px 20px;
      border-radius: 10px;
      font-weight: bold;
      font-size: 20px;
      user-select: none;
    }

    #scoreBoard {
      top: 60px;
    }

    #timeBoard {
      top: 100px;
    }
  </style>
</head>
<body>

  <div id="menu">
    <h1>Takımını Seç</h1>
  </div>

  <canvas id="gameCanvas" width="1000" height="600"></canvas>

  <div id="mobileControls">
    <div id="joystick"><div id="stick"></div></div>
    <div class="btn" id="btn-pass">P</div>
    <div class="btn" id="btn-shoot">S</div>
    <div class="btn" id="btn-switch">D</div>
  </div>

  <div id="scoreBoard"></div>
  <div id="timeBoard"></div>

  <script>
    const teams = [
      { name: "Galatasaray", color: "#FF0000", secondColor: "#FFCC00" },
      { name: "Fenerbahçe", color: "#000080", secondColor: "#FFFF00" },
      { name: "Beşiktaş", color: "#000000", secondColor: "#FFFFFF" },
      { name: "Trabzonspor", color: "#800000", secondColor: "#87CEFA" },
      { name: "Başakşehir", color: "#1E3F66", secondColor: "#FF6600" },
      { name: "Konyaspor", color: "#006400", secondColor: "#FFFFFF" },
      { name: "Bursaspor", color: "#228B22", secondColor: "#FFFFFF" },
      { name: "Adana Demirspor", color: "#4169E1", secondColor: "#FFFFFF" }
    ];

    const menu = document.getElementById("menu");
    const canvas = document.getElementById("gameCanvas");
    const ctx = canvas.getContext("2d");
    const mobileControls = document.getElementById("mobileControls");
    const btnPass = document.getElementById("btn-pass");
    const btnShoot = document.getElementById("btn-shoot");
    const btnSwitch = document.getElementById("btn-switch");

    let playerTeam, opponentTeam;
    let ball = { x: 500, y: 300, radius: 7 };
    let players = [];
    let controlledIndex = 0;
    let score = [0, 0];
    let time = 0;
    let gameStarted = false;

    teams.forEach((team, i) => {
      const div = document.createElement("div");
      div.className = "team";
      div.textContent = `${i + 1}. ${team.name}`;
      div.onclick = () => startGame(team);
      menu.appendChild(div);
    });

    function startGame(team) {
      playerTeam = team;
      do {
        opponentTeam = teams[Math.floor(Math.random() * teams.length)];
      } while (opponentTeam.name === playerTeam.name);

      menu.style.display = "none";
      canvas.style.display = "block";
      mobileControls.style.display = "flex";

      players = generatePlayers(playerTeam, true).concat(generatePlayers(opponentTeam, false));
      gameStarted = true;
      requestAnimationFrame(loop);
    }

    function generatePlayers(team, isLeft) {
      const baseX = isLeft ? 150 : 850;
      const dir = isLeft ? 1 : -1;
      const result = [];

      // Kaleci
      result.push({ x: baseX - 60 * dir, y: 300, r: 14, c: team.secondColor, name: "GK", team: team.name });

      for (let i = 0; i < 4; i++) {
        result.push({ x: baseX, y: 100 + i * 100, r: 10, c: team.color, name: `DF${i+1}`, team: team.name });
      }
      for (let i = 0; i < 4; i++) {
        result.push({ x: baseX + 50 * dir, y: 80 + i * 100, r: 10, c: team.color, name: `MF${i+1}`, team: team.name });
      }
      for (let i = 0; i < 2; i++) {
        result.push({ x: baseX + 100 * dir, y: 200 + i * 200, r: 10, c: team.color, name: `FW${i+1}`, team: team.name });
      }
      return result;
    }

    function drawField() {
      ctx.fillStyle = "#007000";
      ctx.fillRect(0, 0, canvas.width, canvas.height);

      ctx.strokeStyle = "white";
      ctx.lineWidth = 3;
      ctx.strokeRect(20, 20, canvas.width - 40, canvas.height - 40);

      ctx.beginPath();
      ctx.moveTo(canvas.width / 2, 20);
      ctx.lineTo(canvas.width / 2, canvas.height - 20);
      ctx.stroke();

      ctx.beginPath();
      ctx.arc(canvas.width / 2, canvas.height / 2, 60, 0, 2 * Math.PI);
      ctx.stroke();

      // Kaleler
      ctx.fillStyle = "white";
      ctx.fillRect(20, canvas.height / 2 - 50, 10, 100);
      ctx.fillRect(canvas.width - 30, canvas.height / 2 - 50, 10, 100);
    }

    function drawPlayers() {
      players.forEach((p, i) => {
        ctx.beginPath();
        ctx.arc(p.x, p.y, p.r, 0, Math.PI * 2);
        ctx.fillStyle = p.c;
        ctx.fill();

        if (i === controlledIndex) {
          ctx.strokeStyle = "yellow";
          ctx.lineWidth = 3;
          ctx.stroke();
        }

        ctx.fillStyle = "white";
        ctx.font = "12px Arial";
        ctx.textAlign = "center";
        ctx.fillText(p.name, p.x, p.y - p.r - 6);
      });
    }

    function drawBall() {
      ctx.beginPath();
      ctx.arc(ball.x, ball.y, ball.radius, 0, Math.PI * 2);
      ctx.fillStyle = "white";
      ctx.fill();
    }

    function loop() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      drawField();
      drawPlayers();
      drawBall();

      if (gameStarted) {
        requestAnimationFrame(loop);
      }
    }

    // Kontroller
    window.addEventListener("keydown", e => {
      if (e.key === "d") {
        controlledIndex = (controlledIndex + 1) % players.length;
      }
    });

    btnSwitch.addEventListener("click", () => {
      controlledIndex = (controlledIndex + 1) % players.length;
    });
  </script>
</body>
</html>
