<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>Futbol Oyunu</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: #0a3d0a;
      overflow: hidden;
}
    #menu {
      padding: 50px;
      text-align: center;
      color: white;
}
.team {
      padding: 10px 20px;
      margin: 10px auto;
      background: #222;
      color: white;
      width: 250px;
      border: 2px solid white;
      cursor: pointer;
      border-radius: 8px;
      transition: 0.2s;
}
.team:hover {
      background: #444;
}
    canvas {
      display: none;
      margin: auto;
      background: #006400;
      border: 2px solid white;
}
    #controls {
      position: absolute;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 15px;
      z-index: 10;
}
.control-btn {
      background: #444;
      color: white;
      border: 2px solid white;
      border-radius: 50%;
      width: 60px;
      height: 60px;
      font-size: 18px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      user-select: none;
}
  </style>
</head>
<body>

<div id="menu">
  <h1>Takƒ±mƒ±nƒ± Se√ß</h1>
</div>

<canvas id="gameCanvas" width="1000" height="600"></canvas>

<div id="controls">
  <div class="control-btn" onclick="moveBall('up')">üîº</div>
  <div class="control-btn" onclick="moveBall('left')">‚óÄÔ∏è</div>
  <div class="control-btn" onclick="moveBall('right')">‚ñ∂Ô∏è</div>
  <div class="control-btn" onclick="moveBall('down')">üîΩ</div>
</div>

<script>
const teams = [
  { name: "Galatasaray", color: "#ff0000", secondColor: "#ffcc00"},
  { name: "Fenerbah√ße", color: "#000080", secondColor: "#ffff00"},
  { name: "Be≈üikta≈ü", color: "#000000", secondColor: "#ffffff"},
  { name: "Trabzonspor", color: "#800000", secondColor: "#87cefa"},
  { name: "Ba≈üak≈üehir", color: "#1e3f66", secondColor: "#ff6600"},
  { name: "Konyaspor", color: "#006400", secondColor: "#ffffff"},
  { name: "Bursaspor", color: "#228B22", secondColor: "#ffffff"},
  { name: "Adana Demirspor", color: "#4169e1", secondColor: "#ffffff"}
];

const menuDiv = document.getElementById("menu");
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");

let playerTeam = null;
let opponentTeam = null;
let players = [];
let ball = { x: 500, y: 300, radius: 7, color: "white"};

// Men√º olu≈ütur
teams.forEach((team, index) => {
  const div = document.createElement("div");
  div.className = "team";
  div.textContent = `${index + 1}. ${team.name}`;
  div.onclick = () => startGame(team);
  menuDiv.appendChild(div);
});

function startGame(selectedTeam) {
  playerTeam = selectedTeam;
  do {
    opponentTeam = teams[Math.floor(Math.random() * teams.length)];
} while (opponentTeam.name === playerTeam.name);

  menuDiv.style.display = "none";
  canvas.style.display = "block";
  initMatch();
}

function generatePlayers(team, isLeft) {
  const direction = isLeft? 1: -1;
  const baseX = isLeft? 100: 900;
  const teamPlayers = [];

  teamPlayers.push({
    x: baseX - 50 * direction,
    y: 300,
    radius: 12,
    color: team.secondColor
});

  for (let i = 0; i < 4; i++) {
    teamPlayers.push({
      x: baseX,
      y: 100 + i * 100,
      radius: 10,
      color: team.color
});
}

  for (let i = 0; i < 4; i++) {
    teamPlayers.push({
      x: baseX + 80 * direction,
      y: 75 + i * 125,
      radius: 10,
      color: team.color
});
}

  for (let i = 0; i < 2; i++) {
    teamPlayers.push({
      x: baseX + 160 * direction,
      y: 200 + i * 200,
      radius: 10,
      color: team.color
});
}

  return teamPlayers;
}

function initMatch() {
  players = [];
  players.push(...generatePlayers(playerTeam, true));
  players.push(...generatePlayers(opponentTeam, false));
  drawScene();
}

function drawField() {
  ctx.fillStyle = "green";
  ctx.fillRect(0, 0, canvas.width, canvas.height);
  ctx.strokeStyle = "white";
  ctx.beginPath();
  ctx.moveTo(canvas.width / 2, 0);
  ctx.lineTo(canvas.width / 2, canvas.height);
  ctx.stroke();
  ctx.beginPath();
  ctx.arc(canvas.width / 2, canvas.height / 2, 60, 0, Math.PI * 2);
  ctx.stroke();
  ctx.fillRect(0, canvas.height / 2 - 50, 10, 100);
  ctx.fillRect(canvas.width - 10, canvas.height / 2 - 50, 10, 100);
}

function drawPlayers() {
  players.forEach(p => {
    ctx.beginPath();
    ctx.arc(p.x, p.y, p.radius, 0, Math.PI * 2);
    ctx.fillStyle = p.color;
    ctx.fill();
    ctx.strokeStyle = "black";
    ctx.stroke();
});
}

function drawBall() {
  ctx.beginPath();
  ctx.arc(ball.x, ball.y, ball.radius, 0, Math.PI * 2);
  ctx.fillStyle = ball.color;
  ctx.fill();
}

function drawTeamLabels() {
  ctx.font = "20px Arial";
  ctx.fillStyle = playerTeam.color;
  ctx.fillText(`${playerTeam.name}`, 50, 30);
  ctx.fillStyle = opponentTeam.color;
  ctx.fillText(`${opponentTeam.name}`, canvas.width - 200, 30);
}

function drawScene() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  drawField();
  drawPlayers();
  drawBall();
  drawTeamLabels();
  requestAnimationFrame(drawScene);
}

function moveBall(direction) {
  const step = 10;
  if (direction === "up") ball.y -= step;
  if (direction === "down") ball.y += step;
  if (direction === "left") ball.x -= step;
  if (direction === "right") ball.x += step;
}

document.addEventListener("keydown", e => {
  if (e.key === "ArrowUp") moveBall("up");
  if (e.key === "ArrowDown") moveBall("down");
  if (e.key === "ArrowLeft") moveBall("left");
  if (e.key === "ArrowRight") moveBall("right");
});

let gamepadIndex = null;
window.addEventListener("gamepadconnected", (e) => {
  gamepadIndex = e.gamepad.index;
  console.log("Gamepad baƒülandƒ±:", e.gamepad.id);
});

function handleGamepad() {
  const gp = navigator.getGamepads()[gamepadIndex];
  if (gp) {
    const threshold = 0.5;
    const x = gp.axes[0];
    const y = gp.axes[1];
    if (y < -threshold) moveBall("up");
    if (y> threshold) moveBall("down");
    if (x < -threshold) moveBall("left");
    if (x> threshold) moveBall("right");
}
  requestAnimationFrame(handleGamepad);
}

setInterval(() => {
  if (gamepadIndex!== null) handleGamepad();
}, 100);
</script>
</body>
</html>
